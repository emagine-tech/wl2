/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@supabase/supabase-js@2.93.3/dist/index.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{FunctionsClient as e}from"/npm/@supabase/functions-js@2.93.3/+esm";export{FunctionRegion,FunctionsError,FunctionsFetchError,FunctionsHttpError,FunctionsRelayError}from"/npm/@supabase/functions-js@2.93.3/+esm";import{PostgrestClient as t}from"/npm/@supabase/postgrest-js@2.93.3/+esm";export{PostgrestError}from"/npm/@supabase/postgrest-js@2.93.3/+esm";import{RealtimeClient as s}from"/npm/@supabase/realtime-js@2.93.3/+esm";export*from"/npm/@supabase/realtime-js@2.93.3/+esm";import{StorageClient as r}from"/npm/@supabase/storage-js@2.93.3/+esm";import{AuthClient as n}from"/npm/@supabase/auth-js@2.93.3/+esm";export*from"/npm/@supabase/auth-js@2.93.3/+esm";let o="";o="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const a={headers:{"X-Client-Info":`supabase-js-${o}/2.93.3`}},i={schema:"public"},u={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},h={};function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function p(e,t,s){return(t=l(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const f=(e,t,s)=>{const r=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(s),n=Headers;return async(s,o)=>{var a;const i=null!==(a=await t())&&void 0!==a?a:e;let u=new n(null==o?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${i}`),r(s,m(m({},o),{},{headers:u}))}};var b=class extends n{constructor(e){super(e)}},g=class{constructor(e,s,n){var o,c;this.supabaseUrl=e,this.supabaseKey=s;const l=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((s=t).endsWith("/")?s:s+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var s}(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const p=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var s,r;const{db:n,auth:o,realtime:a,global:i}=e,{db:u,auth:h,realtime:c,global:l}=t,p={db:m(m({},u),n),auth:m(m({},h),o),realtime:m(m({},c),a),storage:{},global:m(m(m({},l),i),{},{headers:m(m({},null!==(s=null==l?void 0:l.headers)&&void 0!==s?s:{}),null!==(r=null==i?void 0:i.headers)&&void 0!==r?r:{})}),accessToken:async()=>""};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}(null!=n?n:{},{db:i,realtime:h,auth:m(m({},u),{},{storageKey:p}),global:a});var b;(this.storageKey=null!==(o=d.auth.storageKey)&&void 0!==o?o:"",this.headers=null!==(c=d.global.headers)&&void 0!==c?c:{},d.accessToken)?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(b=d.auth)&&void 0!==b?b:{},this.headers,d.global.fetch);this.fetch=f(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(m({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then((e=>this.realtime.setAuth(e))).catch((e=>console.warn("Failed to set initial Realtime auth token:",e))),this.rest=new t(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new r(this.storageUrl.href,this.headers,this.fetch,null==n?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new e(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t,s=this;if(s.accessToken)return await s.accessToken();const{data:r}=await s.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,storageKey:o,flowType:a,lock:i,debug:u,throwOnError:h},c,l){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b({url:this.authUrl.href,headers:m(m({},p),c),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:n,flowType:a,lock:i,debug:u,throwOnError:h,fetch:l,hasCustomAuthorizationHeader:Object.keys(this.headers).some((e=>"authorization"===e.toLowerCase()))})}_initRealtimeClient(e){return new s(this.realtimeUrl.href,m(m({},e),{},{params:m(m({},{apikey:this.supabaseKey}),null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)}))}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=s,this.realtime.setAuth(s))}};const v=(e,t,s)=>new g(e,t,s);(function(){if("undefined"!=typeof window)return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(null==t)return!1;const s=t.match(/^v(\d+)\./);return!!s&&parseInt(s[1],10)<=18})()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");export{g as SupabaseClient,v as createClient};export default null;
//# sourceMappingURL=/sm/16ebae2269dbd64a06bed41d6a1efaf0c9e417340cbea56b6deb8e426addd492.map